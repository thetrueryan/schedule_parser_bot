# üìÖ Schedule Parser Bot

–ü–∞—Ä—Å–µ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å —Å–∞–π—Ç–∞ [Dnevnik.ru](https://dnevnik.ru) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Selenium**, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ **PostgreSQL** –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ **Telegram-–±–æ—Ç–∞**.  

–¢–µ–ø–µ—Ä—å, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –Ω–µ –Ω—É–∂–Ω–æ –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç–∞—Ä—ã–π –∏ –º–µ–¥–ª–µ–Ω–Ω—ã–π —Å–∞–π—Ç ‚Äî –±–æ—Ç —Å–ø–∞—Ä—Å–∏—Ç –∏ –¥–æ—Å—Ç–∞–Ω–µ—Ç –µ–≥–æ –¥–ª—è –≤–∞—Å –∏–∑ –±–∞–∑—ã –∑–∞ **–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã** ‚ö°

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∫–∞–∂–¥—ã–µ **12 —á–∞—Å–æ–≤**  
- üîê –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ **–ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å** –æ—Ç `dnevnik.ru`    
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ PostgreSQL
- üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–≤—Ç–æ-—Ä–∞—Å—Å—ã–ª–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ —á–∞—Ç –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ
- ü§ñ –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç —Å –∫–æ–º–∞–Ω–¥–∞–º–∏:
  - `/—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –î–î.–ú–ú.–ì–ì–ì–ì` ‚Äî —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å  
  - `/–¥–æ–±–∞–≤–∏—Ç—å` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫—É   
  - `/—É–¥–∞–ª–∏—Ç—å` ‚Äî –æ—Ç–ø–∏—Å–∫–∞ –æ—Ç –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∏  
  - `/help` ‚Äî –ø–æ–º–æ—â—å –ø–æ –∫–æ–º–∞–Ω–¥–∞–º  
  - `/start` ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ –º–µ–Ω—é  

- ‚öôÔ∏è –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–¥–µ–ª—å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **2 –Ω–µ–¥–µ–ª–∏**)  
  - –ò–º—è –≥—Ä—É–ø–ø—ã/–∫–ª–∞—Å—Å–∞ –∑–∞–¥–∞—ë—Ç—Å—è –≤ `.env`  
  - –í—Ä–µ–º—è –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∏ (—á–∞—Å—ã –∏ –º–∏–Ω—É—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ UTC)  

---

## üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫
### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–°–¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ –∫–æ–º–∞–Ω–¥–æ–π:
```bash
git clone git@github.com:thetrueryan/schedule_parser_bot.git
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ —É–∫–∞–∂–∏—Ç–µ –≤ –Ω—ë–º:
```env
# —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
BOT_TOKEN=YOUR_BOT_TOKEN # –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather

# –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
GROUP_NAME=YOUR_GROUP_NAME # –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π –≥—Ä—É–ø–ø—ã –∏–ª–∏ –∫–ª–∞—Å—Å–∞
WEEKS_TOTAL=TOTAL_WEEK_TO_PARSE_SCHEDULE # DEFAULT=2 (—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å –±—É–¥–µ—Ç –ø–∞—Ä—Å–∏—Ç—å –±–æ—Ç)
NOTIFICATION_TIME_HOUR=YOUR_NOTIFICATION_HOUR #–í–∞–∂–Ω–æ!! –í—Ä–µ–º—è —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ UTC, –ø–æ —ç—Ç–æ–º—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ 14:00 –ø–æ –ú–°–ö –Ω–∞–¥–æ —É–∫–∞–∑–∞—Ç—å 11 –£–ß–¢–ò–¢–ï –≠–¢–û!!
NOTIFICATION_TIME_MINUTES=YOUR_NOTIFICATION_MINUTES #DEFAULT=0 (–º–∏–Ω—É—Ç—ã –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∏)

# –ü–∞—Ä—Å–µ—Ä
DNEVNIK_URL="https://dnevnik.ru/"
DNEVNIK_LOGIN=YOUR_DNEVNIK_LOGIN
DNEVNIK_PASS=YOUR_DNEVNIK_PASS

# PostgreSQL –ë–î
DB_HOST=YOUR_DB_HOST # DEFAULT=localhost
DB_PASS=YOUR_DB_PASS
DB_USER=YOUR_DB_USER # DEFAULT=postgres
DB_PORT=YOUR_DB_PORT # DEFAULT=5432
DB_NAME=YOUR_DB_NAME # DEFAULT=postgres
```

### 3. –ó–∞–ø—É—Å–∫ –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è ‚úÖ)

–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π Dockerfile –∏ docker-compose.yml.
–ë–æ—Ç —É–∂–µ —Å–æ–±—Ä–∞–Ω –≤ [Docker Hub](https://hub.docker.com/repository/docker/thetrueryan/schedule_parser_bot/):
```bash
thetrueryan/schedule_parser_bot:latest
```

–ó–∞–ø—É—Å–∫:
```bash
docker-compose up -d
```
- –ü–æ–¥–Ω–∏–º–µ—Ç—Å—è PostgreSQL –∏ —Å–∞–º –±–æ—Ç (–≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ–¥—Ç—è–Ω—É—Ç—ã –∏–∑ .env)
- –í –æ–±—Ä–∞–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω Linux chromedriver –¥–ª—è Selenium

### 4. –ó–∞–ø—É—Å–∫ –±–µ–∑ Docker (–í–∞–∂–Ω–æ, –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∞–º–æ–º—É —Å–æ–∑–¥–∞—Ç—å –ë–î PostgreSQL

- –î–ª—è Linux –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å chromedriver –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- –î–ª—è Windows –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–∞—á–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π [chromedriver](https://googlechromelabs.github.io/chrome-for-testing/#stable) –∏ –∑–∞–º–µ–Ω–∏—Ç—å –∏–º chromedriver –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ poetry:
```bash
pip install poetry # –µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
poetry install # —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
poetry shell
```

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ pip (–µ—Å–ª–∏ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –µ–≥–æ):
```bash
pip install -r requirements.txt
```

–ó–∞–ø—É—Å–∫:
```bash
alembic upgrade head # —Å–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
python -m src.main 
```

---

## üì¶ –°—Ç–µ–∫

- Python 3.12+
- Aiogram 3x
- Selenium
- fake-useragents
- PostgreSQL
- SQLAlchemy 2.0
- Alembic


---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ó–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –±–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å docker-compose –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∏ –∞–≤—Ç–æ–ø–æ–¥–Ω—è—Ç–∏—è –±–∞–∑—ã

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License. –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –æ–±—É—á–µ–Ω–∏—è.

**–ë—É–¥—É —Ä–∞–¥ –∑–≤—ë–∑–¥–æ—á–∫–µ ‚≠ê –Ω–∞ GitHub**
